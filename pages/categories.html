<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Libreshelf</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../src/output.css" />

    <!-- Icons links -->
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
      integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <script src="../js/theme.js"></script>
    <style>
      body {
        font-family: "Poppins", sans-serif;
      }
    </style>
  </head>
  <body class="bg-[#FAF9F8] dark:bg-slate-900">
    <!-- ================= HEADER ================= -->
    <div id="navbar-container"></div>

    <!-- ================= MAIN CONTENT ================= -->
    <!-- Center the whole content container with mx-auto and sensible horizontal padding -->
    <div class="mb-10 max-w-7xl mx-auto pt-32 px-6 flex gap-10">
      <!-- SIDEBAR (Desktop Only) -->
      <aside
        class="dark:bg-primary mt-20 w-64 bg-white rounded-lg shadow p-5 h-fit hidden md:block"
      >
        <h2 class="font-bold text-lg mb-3 dark:text-pure-white">
          Filter by genres
        </h2>
        <div class="space-y-2 mb-5 dark:text-pure-white">
          <label
            ><input type="radio" name="genre" value="Horror" /> Horror /
            Thriller</label
          ><br />
          <label
            ><input type="radio" name="genre" value="History" /> History
            books</label
          ><br />
          <label><input type="radio" name="genre" value="Novel" /> Novel</label>
        </div>

        <h2 class="font-bold text-lg mb-3 dark:text-pure-white">
          Filter by publisher
        </h2>
        <div class="space-y-2 mb-5 dark:text-pure-white">
          <label
            ><input type="radio" name="publisher" value="Amazon" /> Amazon
            Publications</label
          ><br />
          <label
            ><input type="radio" name="publisher" value="Kindle" /> Kindle
            Publications</label
          ><br />
          <label
            ><input type="radio" name="publisher" value="Arena" /> Arena
            Publishers</label
          >
        </div>

        <h2 class="font-bold text-lg mb-3 dark:text-pure-white">
          Filter by author name
        </h2>
        <div class="space-y-2 dark:text-pure-white">
          <label
            ><input type="radio" name="author" value="Cam R. Teal" /> Cam R.
            Teal</label
          ><br />
          <label
            ><input type="radio" name="author" value="Chris Money" /> Chris
            Money</label
          ><br />
          <label
            ><input type="radio" name="author" value="John Nexus" /> John
            Nexus</label
          >
        </div>

        <button
          onclick="clearFilters()"
          class="mt-4 w-full bg-gray-200 py-2 rounded-md hover:bg-gray-300"
        >
          Clear Filters
        </button>
      </aside>

      <!-- RIGHT CONTENT -->
      <div class="flex-1">
        <!-- Search + Mobile Filter Btn -->
        <div class="flex justify-between items-center mb-6 md:justify-end">
          <button
            id="mobileFilterBtn"
            class="md:hidden px-4 py-2 bg-[#112D4E] text-white rounded-lg shadow hover:bg-[#3F72AF]"
          >
            Filters â˜°
          </button>

          <input
            id="searchInput"
            type="text"
            placeholder="Search Something..."
            class="dark:border-pure-white dark:text-pure-white w-56 md:w-72 border rounded-full px-4 py-2 shadow-sm ml-3"
            onkeyup="filterBooks()"
          />
        </div>
        <!-- MOBILE FILTER PANEL -->
        <div
          id="mobileFilterPanel"
          class="md:hidden hidden bg-white shadow-lg rounded-lg p-5 mb-6 border"
        >
          <h2 class="font-bold text-lg mb-3 text-[#112D4E]">
            Filter by genres
          </h2>
          <div class="space-y-2 mb-5">
            <label
              ><input type="radio" name="m_genre" value="Horror" /> Horror /
              Thriller</label
            ><br />
            <label
              ><input type="radio" name="m_genre" value="History" /> History
              books</label
            ><br />
            <label
              ><input type="radio" name="m_genre" value="Novel" /> Novel</label
            >
          </div>

          <h2 class="font-bold text-lg mb-3 text-[#112D4E]">
            Filter by publisher
          </h2>
          <div class="space-y-2 mb-5">
            <label
              ><input type="radio" name="m_publisher" value="Amazon" /> Amazon
              Publications</label
            ><br />
            <label
              ><input type="radio" name="m_publisher" value="Kindle" /> Kindle
              Publications</label
            ><br />
            <label
              ><input type="radio" name="m_publisher" value="Arena" /> Arena
              Publishers</label
            >
          </div>

          <h2 class="font-bold text-lg mb-3 text-[#112D4E]">
            Filter by author
          </h2>
          <div class="space-y-2">
            <label
              ><input type="radio" name="m_author" value="Cam R. Teal" /> Cam R.
              Teal</label
            ><br />
            <label
              ><input type="radio" name="m_author" value="Chris Money" /> Chris
              Money</label
            ><br />
            <label
              ><input type="radio" name="m_author" value="John Nexus" /> John
              Nexus</label
            >
          </div>

          <button
            onclick="clearFilters()"
            class="mt-4 w-full bg-gray-200 py-2 rounded-md hover:bg-gray-300"
          >
            Clear Filters
          </button>
        </div>

        <!-- BOOK GRID 8 cards
             Key changes:
             - Responsive columns: 1 (default) | 2 (sm) | 4 (lg)
             - Use justify-items-center to center cards in each grid cell
             - Each card has a fixed max width to keep consistent size
        -->
        <div
          id="bookGrid"
          class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 justify-items-center"
        >
          <!-- Example Card (repeat as needed) -->
          <div
            class="book-card mt-4 bg-white dark:bg-primary rounded-lg shadow-md hover:shadow-xl transition duration-300 overflow-hidden p-3 flex flex-col items-center text-center w-full max-w-xs"
            data-genre="Novel"
            data-publisher="Amazon"
            data-author="Cam R. Teal"
          >
            <img
              src="https://m.media-amazon.com/images/S/compressed.photo.goodreads.com/books/1680592101i/78133908.jpg"
              alt="The Last Gathering Cover"
              class="w-full h-auto object-cover rounded-md mb-3 aspect-[2/3]"
            />
            <h3
              class="book-title font-bold text-base text-gray-900 dark:text-pure-white line-clamp-2"
            >
              The Last Gathering
            </h3>
            <p class="text-xs text-gray-500 mt-1 mb-2 line-clamp-3">
              Descriptions of the day-to-day happenings within the house.
            </p>
            <div
              class="flex justify-between w-full mt-auto pt-2 border-t border-gray-100"
            >
              <button
                class="text-gray-400 hover:text-red-500 transition duration-150"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-heart"
                >
                  <path
                    d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z"
                  />
                </svg>
              </button>
              <button
                class="text-gray-400 hover:text-blue-500 transition duration-150"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-download"
                >
                  <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                  <polyline points="7 10 12 15 17 10" />
                  <line x1="12" x2="12" y1="15" y2="3" />
                </svg>
              </button>
            </div>
          </div>

          <!-- Duplicate cards (kept same structure) -->
          <div
            class="book-card mt-4 bg-white dark:bg-primary rounded-lg shadow-md hover:shadow-xl transition duration-300 overflow-hidden p-3 flex flex-col items-center text-center w-full max-w-xs"
            data-genre="History"
            data-publisher="Kindle"
            data-author="Chris Money"
          >
            <img
              src="https://m.media-amazon.com/images/S/compressed.photo.goodreads.com/books/1333578164i/13414814.jpg"
              alt="Book cover"
              class="w-full h-auto object-cover rounded-md mb-3 aspect-[2/3]"
            />
            <h3 class="book-title font-bold text-base text-gray-900 dark:text-pure-white line-clamp-2">
              The Last Gathering
            </h3>
            <p class="text-xs text-gray-500 mt-1 mb-2 line-clamp-3">
              Descriptions of the day-to-day happenings within the house.
            </p>
            <div
              class="flex justify-between w-full mt-auto pt-2 border-t border-gray-100"
            >
              <button class="text-gray-400 hover:text-red-500 transition duration-150">
                <!-- heart svg -->
              </button>
              <button class="text-gray-400 hover:text-blue-500 transition duration-150">
                <!-- download svg -->
              </button>
            </div>
          </div>

          <div
            class="book-card mt-4 bg-white dark:bg-primary rounded-lg shadow-md hover:shadow-xl transition duration-300 overflow-hidden p-3 flex flex-col items-center text-center w-full max-w-xs"
            data-genre="Horror"
            data-publisher="Arena"
            data-author="John Nexus"
          >
            <img
              src="https://m.media-amazon.com/images/S/compressed.photo.goodreads.com/books/1371428466i/17978489.jpg"
              alt="Book cover"
              class="w-full h-auto object-cover rounded-md mb-3 aspect-[2/3]"
            />
            <h3 class="book-title font-bold text-base text-gray-900 dark:text-pure-white line-clamp-2">
              The Last Gathering
            </h3>
            <p class="text-xs text-gray-500 mt-1 mb-2 line-clamp-3">
              Descriptions of the day-to-day happenings within the house.
            </p>
            <div
              class="flex justify-between w-full mt-auto pt-2 border-t border-gray-100"
            >
              <button class="text-gray-400 hover:text-red-500 transition duration-150">
                <!-- heart svg -->
              </button>
              <button class="text-gray-400 hover:text-blue-500 transition duration-150">
                <!-- download svg -->
              </button>
            </div>
          </div>

          <div
            class="book-card mt-4 bg-white dark:bg-primary rounded-lg shadow-md hover:shadow-xl transition duration-300 overflow-hidden p-3 flex flex-col items-center text-center w-full max-w-xs"
            data-genre="Novel"
            data-publisher="Amazon"
            data-author="Cam R. Teal"
          >
            <img
              src="https://m.media-amazon.com/images/S/compressed.photo.goodreads.com/books/1729943409i/220353644.jpg"
              alt="Book cover"
              class="w-full h-auto object-cover rounded-md mb-3 aspect-[2/3]"
            />
            <h3 class="book-title font-bold text-base text-gray-900 dark:text-pure-white line-clamp-2">
              The Last Gathering
            </h3>
            <p class="text-xs text-gray-500 mt-1 mb-2 line-clamp-3">
              Descriptions of the day-to-day happenings within the house.
            </p>
            <div
              class="flex justify-between w-full mt-auto pt-2 border-t border-gray-100"
            >
              <button class="text-gray-400 hover:text-red-500 transition duration-150">
                <!-- heart svg -->
              </button>
              <button class="text-gray-400 hover:text-blue-500 transition duration-150">
                <!-- download svg -->
              </button>
            </div>
          </div>

          <!-- additional cards (you already had many) -->
          <div
            class="book-card mt-4 bg-white dark:bg-primary rounded-lg shadow-md hover:shadow-xl transition duration-300 overflow-hidden p-3 flex flex-col items-center text-center w-full max-w-xs"
            data-genre="History"
            data-publisher="Kindle"
            data-author="Chris Money"
          >
            <img
              src="https://m.media-amazon.com/images/S/compressed.photo.goodreads.com/books/1441586898i/24885734.jpg"
              alt="Book cover"
              class="w-full h-auto object-cover rounded-md mb-3 aspect-[2/3]"
            />
            <h3 class="book-title font-bold text-base text-gray-900 dark:text-pure-white line-clamp-2">
              The Last Gathering
            </h3>
            <p class="text-xs text-gray-500 mt-1 mb-2 line-clamp-3">
              Descriptions of the day-to-day happenings within the house.
            </p>
            <div
              class="flex justify-between w-full mt-auto pt-2 border-t border-gray-100"
            >
              <button class="text-gray-400 hover:text-red-500 transition duration-150">
                <!-- heart svg -->
              </button>
              <button class="text-gray-400 hover:text-blue-500 transition duration-150">
                <!-- download svg -->
              </button>
            </div>
          </div>

          <div
            class="book-card mt-4 bg-white dark:bg-primary rounded-lg shadow-md hover:shadow-xl transition duration-300 overflow-hidden p-3 flex flex-col items-center text-center w-full max-w-xs"
            data-genre="Novel"
            data-publisher="Arena"
            data-author="John Nexus"
          >
            <img
              src="https://placehold.co/150x220/264653/ffffff?text=Book+Cover"
              alt="Book cover"
              class="w-full h-auto object-cover rounded-md mb-3 aspect-[2/3]"
            />
            <h3 class="book-title font-bold text-base text-gray-900 dark:text-pure-white line-clamp-2">
              The Last Gathering
            </h3>
            <p class="text-xs text-gray-500 mt-1 mb-2 line-clamp-3">
              Descriptions of the day-to-day happenings within the house.
            </p>
            <div
              class="flex justify-between w-full mt-auto pt-2 border-t border-gray-100"
            >
              <button class="text-gray-400 hover:text-red-500 transition duration-150">
                <!-- heart svg -->
              </button>
              <button class="text-gray-400 hover:text-blue-500 transition duration-150">
                <!-- download svg -->
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ================= FOOTER ================= -->
    <div id="footer-container"></div>
    <!-- ================= SCRIPTS ================= -->

    <script src="../js/navbar.js"></script>
    <script src="../js/footer.js"></script>

    <script>
      // Initialize Navbar
      renderNavbar("navbar-container", "home");

      // Initialize Footer
      renderFooter("footer-container");
    </script>

    <script>
      // small safety: ensure hamburger exists before binding
      if (document.getElementById("hamburgerBtn")) {
        document.getElementById("hamburgerBtn").onclick = () => {
          document.getElementById("mobileMenu").classList.toggle("hidden");
        };
      }

      document.getElementById("mobileFilterBtn").onclick = () => {
        document.getElementById("mobileFilterPanel").classList.toggle("hidden");
      };

      // Filter books (supports desktop and mobile filter radios)
      function filterBooks() {
        let searchValue = document
          .getElementById("searchInput")
          .value.toLowerCase();

        // support both desktop and mobile radio groups
        let genre =
          document.querySelector("input[name='genre']:checked")?.value ||
          document.querySelector("input[name='m_genre']:checked")?.value ||
          null;

        let publisher =
          document.querySelector("input[name='publisher']:checked")?.value ||
          document.querySelector("input[name='m_publisher']:checked")?.value ||
          null;

        let author =
          document.querySelector("input[name='author']:checked")?.value ||
          document.querySelector("input[name='m_author']:checked")?.value ||
          null;

        let books = document.querySelectorAll(".book-card");

        books.forEach((book) => {
          let titleEl =
            book.querySelector(".book-title") || book.querySelector("h3");
          let title = titleEl ? titleEl.textContent.toLowerCase() : "";
          let matchSearch = title.includes(searchValue);
          let matchGenre = !genre || book.dataset.genre === genre;
          let matchPublisher =
            !publisher || book.dataset.publisher === publisher;
          let matchAuthor = !author || book.dataset.author === author;

          if (matchSearch && matchGenre && matchPublisher && matchAuthor) {
            book.style.display = "";
          } else {
            book.style.display = "none";
          }
        });
      }

      // Clear filters
      function clearFilters() {
        document
          .querySelectorAll("input[type='radio']")
          .forEach((r) => (r.checked = false));
        document.getElementById("searchInput").value = "";
        filterBooks();
      }

      // Add event listeners for filters (works on mobile and desktop)
      document.querySelectorAll("input[type='radio']").forEach((radio) => {
        radio.addEventListener("change", filterBooks);
        radio.addEventListener("click", filterBooks);
      });

      // run once on load to apply initial filter state
      filterBooks();
    </script>
  </body>
</html>
